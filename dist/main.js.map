{"mappings":"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","sources":["index.js"],"sourcesContent":["const validator = window.validator;\r\nconst cardNumberInput = document.getElementById('card-number');\r\nconst expiryDateInput = document.getElementById('expiry-date');\r\nconst cvcInput = document.getElementById('cvc');\r\nconst emailInput = document.getElementById('email');\r\nconst payBtn = document.getElementById('pay-btn');\r\n  \r\n\r\nfunction getCardType(cardNumber) {\r\n    const firstDigit = cardNumber[0];\r\n    const secondDigit = cardNumber[1];\r\n  \r\n    if (firstDigit === '4') {\r\n      return 'visa';\r\n    } else if (firstDigit === '5' && (secondDigit === '1' || secondDigit === '2' || secondDigit === '3' || secondDigit === '4' || secondDigit === '5')) {\r\n      return 'mastercard';\r\n    } else if (firstDigit === '2' && secondDigit === '2') {\r\n      return 'mir';\r\n    } else {\r\n      return 'unknown';\r\n    }\r\n  }\r\n  \r\n\r\nfunction validateCardNumber(value) {\r\n  // Валидация номера карты\r\n  return value.replace(/\\D/g, '').length === 16;\r\n}\r\n\r\nfunction validateExpiryDate(value) {\r\n  // Валидация даты окончания действия карты\r\n  const [month, year] = value.split('/');\r\n  const currentDate = new Date();\r\n  const currentMonth = String(currentDate.getMonth() + 1).padStart(2, '0');\r\n  const currentYear = String(currentDate.getFullYear()).slice(2);\r\n\r\n  return (\r\n    month >= '01' &&\r\n    month <= '12' &&\r\n    (year > currentYear || (year === currentYear && month >= currentMonth))\r\n  );\r\n}\r\n\r\nfunction validateCVC(value) {\r\n  // Валидация CVC/CVV\r\n  return value.length === 3;\r\n}\r\n\r\nfunction validateEmail(value) {\r\n  // Валидация email\r\n  return validator.isEmail(value);\r\n}\r\n\r\nfunction handleInput(event) {\r\n  const { value, id } = event.target;\r\n  const cardLogo = document.getElementById('card-logo');\r\n\r\n  switch (id) {\r\n    case 'card-number':\r\n      event.target.value = value.replace(/\\D/g, '').replace(/(.{4})/g, '$1 ').trim();\r\n      const cardType = getCardType(value.replace(/\\s/g, ''));\r\n      if (cardType !== 'unknown') {\r\n        const img = document.createElement('img');\r\n        img.src = getCardImageUrl(cardType);\r\n        img.alt = cardType;\r\n        img.width = 50;\r\n        cardLogo.innerHTML = '';\r\n        cardLogo.appendChild(img);\r\n      } else {\r\n        cardLogo.innerHTML = '';\r\n      }\r\n      break;\r\n    case 'expiry-date':\r\n      event.target.value = value\r\n        .replace(/\\D/g, '')\r\n        .replace(/(\\d{2})/, '$1/')\r\n        .replace(/(\\d{2})(\\d{1,2})/, '$1/$2')\r\n        .replace(/(\\d{2})\\/(\\d{2})\\/(\\d{1,2})/, '$1/$2');\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nfunction getCardImageUrl(cardType) {\r\n  switch (cardType) {\r\n    case 'visa':\r\n      return 'https://www.freepnglogos.com/uploads/verified-by-visa-logo-png-0.png';\r\n    case 'mastercard':\r\n      return 'https://www.freepnglogos.com/uploads/mastercard-png/mastercard-logo-transparent-png-stickpng-10.png';\r\n    case 'mir':\r\n      return 'https://w7.pngwing.com/pngs/867/97/png-transparent-national-payment-system-mir-hd-logo-thumbnail.png';\r\n    default:\r\n      return '';\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n  \r\n  \r\n\r\nfunction handleBlur(event) {\r\n  const { value, id } = event.target;\r\n  const isValid = {\r\n    'card-number': validateCardNumber(value),\r\n    'expiry-date': validateExpiryDate(value),\r\n    cvc: validateCVC(value),\r\n    email: validateEmail(value),\r\n  }[id];\r\n\r\n  if (!isValid) {\r\n    event.target.classList.add('invalid');\r\n  } else {\r\n    event.target.classList.remove('invalid');\r\n  }\r\n\r\n  const allInputsValid = Array.from(document.querySelectorAll('input')).every(\r\n    (input) => input.classList.contains('invalid') === false\r\n  );\r\n  payBtn.disabled = !allInputsValid;\r\n}\r\ncardNumberInput.addEventListener('input', handleInput);\r\nexpiryDateInput.addEventListener('input', handleInput);\r\ndocument.querySelectorAll('input').forEach((input) => {\r\n  input.addEventListener('blur', handleBlur);\r\n});\r\n"],"names":[],"version":3,"file":"main.js.map"}